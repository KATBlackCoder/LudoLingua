# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- **Phase 4: Cleanup & Modernization - 75% COMPLETED**
  - **File Renaming for Consistency:** Complete reorganization for clear naming conventions
    - Renamed `app/components/translation/` → `app/components/translator/` for workflow clarity
    - Renamed `app/pages/translation.vue` → `app/pages/translator.vue` for consistency
    - Updated all route references from `/translation` to `/translator` throughout navigation
    - Fixed all import statements across components for consistency
    - Established clear distinction between `translator.*` (workflow) vs `translations.*` (management)
  - **Nuxt 4.1 Upgrade:** Successfully migrated to latest Nuxt version
    - Upgraded from Nuxt 4.0.3 to Nuxt 4.1.1 with all latest features
    - Enhanced chunk stability with automatic import maps for better caching efficiency
    - Performance optimizations including route rules cache management and internal improvements
    - Improved lazy hydration for better component loading and rendering performance
    - Access to experimental features including Rolldown bundling and cutting-edge technologies
    - Full backward compatibility maintained during upgrade
  - **Nuxt UI v4 Migration:** Complete UI library modernization
    - Successfully migrated from Nuxt UI v3.3.0 to v4.0.0-alpha.1
    - Unified package with Pro components now included for free in the base package
    - Component API updates with new props, slots, and improved developer experience
    - Enhanced TypeScript support with better type definitions and IntelliSense
    - New styling system with improved theming and customization capabilities
    - Verified all existing components work correctly with new version
    - Maintained UI consistency while gaining access to new features
  - **Architecture Benefits:**
    - Modern tech stack with latest Nuxt 4.1.1 and cutting-edge features
    - Enhanced UI library with Pro components and superior TypeScript support
    - Clear organization eliminating confusion between workflow and management concerns
    - Significant performance improvements through import maps, lazy hydration, and route optimizations
    - Future-ready foundation with access to experimental features and latest web technologies
    - Proven patterns ready for simple, working translation management implementation

### Previous Additions
- **Phase 4: Code Organization - COMPLETED**
  - **Backend Renames:** Renamed `translation.rs` → `translator.rs` for clarity and consistency
  - **Frontend Renames:** Renamed `translate.ts` → `translator.ts` and `useTranslation.ts` → `useTranslator.ts`
  - **Import Updates:** Updated all imports and references across 12 files for consistency
  - **Testing Validation:** Verified builds work correctly after all renames
  - **Naming Convention:** Established clear distinction between `translator.*` (workflow) vs `translations.*` (CRUD management)
- **Phase 3: Smart Project Loading & Export System - COMPLETED**
  - **Engine-Agnostic Export System**: Factory pattern-based export with `reconstruct_text_unit_id()` method in Engine trait
  - **Database-Driven Injection**: Direct database queries for translated units using `find_translated_units_for_export()`
  - **Fixed Export Location**: Always exports to `project/ludolingua/` folder with proper file structure
  - **Open-Closed Principle**: Adding new engines requires only implementing `reconstruct_text_unit_id()` method
  - **Manifest Validation**: Export uses correct manifest hash for project identification
  - **User Feedback**: Toast notifications for export success/error states
  - **File Integrity**: Original project files remain unchanged during export process
  - **Working Export for RPG Maker MV & MZ**: Tested and verified functional
- **Major Code Cleanup & Architecture Improvements**
  - **33% function reduction in `engine.rs`** (450 → 344 lines, 24% size reduction)
  - **14% line reduction in `handler.rs`** (222 → 217 lines, 2.5% reduction)
  - **Unified database functions**: Consolidated duplicate loading functions into single `load_translations_from_database`
  - **Standardized error handling**: Manual AppError→String conversion with consistent patterns
  - **Clean architecture**: Perfect Open-Closed Principle implementation with factory-managed dispatch
  - **DRY principle applied**: Eliminated code duplication with helper functions
- **Smart Project Loading System**
  - **Manifest-aware loading**: Automatic detection of fresh vs existing projects
  - **Zero manual steps**: Removed "Load Saved" button and automatic routing
  - **Status-based routing**: Automatic component selection based on translation status
  - **100% smart loading capacity**: Handles all translation states seamlessly
  - **Database persistence**: All translations saved immediately to SQLite
  - **Fallback logic**: Graceful handling when database is empty or corrupted
- **Comprehensive Codebase Cleanup**
  - **Removed unused LLM services**: groq, openai, openrouter completely removed
  - **Cleaned up provider factory**: Only supports Ollama and RunPod
  - **Removed unused token estimation**: Moved `ActualTokenUsage` to translation.rs
  - **Cleaned up common.rs**: Removed unused Wolf RPG functions (307 lines removed)
  - **Updated mod.rs files**: Removed all references to deleted modules
  - **Frontend store cleanup**: Removed references to deleted LLM providers
- **Phase 4: Production Readiness - CURRENT FOCUS**
  - **Error Handling & Reliability**: Comprehensive error recovery mechanisms
  - **Database connection failure handling**: Partial export failure rollback
  - **Cross-platform compatibility validation**: Network timeout handling for remote LLM servers
  - **Performance Optimization**: Large project handling (1000+ files)
  - **Memory usage optimization**: Export progress indicators
  - **Background processing**: LLM request batching and rate limiting
  - **User Experience Enhancement**: Export history tracking, bulk export options, advanced filtering
  - **Better loading states**: Export format customization, advanced filtering and search
 - Backend/Manifest: Translation statistics tracking in `.ludolingua.json`
   - Added `total_text_units` and `translated_text_units` fields to `ProjectManifest` struct
   - Automatic manifest updates after text extraction (total count) and translation (translated count)
   - Manifest preserves statistics when recreated due to configuration changes
   - Frontend displays translation progress using manifest statistics
 - Backend/Manifest: Critical manifest hash mismatch fix
   - Fixed translations not loading due to manifest hash format mismatch
   - Removed old manifest hash format support (only uses new SHA hash format)
   - Updated `translate_text_unit` to use correct manifest hash from engine info
   - Simplified manifest system with single consistent hash format
 - Backend/Export: Complete export functionality for RPG Maker MV & MZ engines
   - Implemented engine-agnostic export system using factory pattern
   - Added `reconstruct_text_unit_id()` method to Engine trait for extensible export
   - Created `find_translated_units_for_export()` function for efficient database queries
   - Fixed export location to `project/ludolingua/` folder with proper file structure
   - Added toast notifications for export success/error feedback
   - Tested and verified working export for both MV and MZ engines
   - Open-Closed Principle compliance: new engines need only implement `reconstruct_text_unit_id()`
 - Backend/LLM: Groq integration for ultra-fast translation processing
   - Added `groq` feature to `llm` crate in `src-tauri/Cargo.toml`
   - Created `src-tauri/src/llm/services/groq.rs` using `LLMBuilder` with `LLMBackend::Groq`
   - Added `ProviderKind::Groq` to enum and factory instantiation
   - Created `src-tauri/models/groq.json` with popular models including Llama 3.1 70B, Mixtral 8x7B, and Gemma 2 9B
   - Updated provider commands to load Groq models from JSON catalog
   - Added Groq to available providers in frontend provider store
   - Updated settings page to handle Groq's fixed API endpoint (clears base_url automatically)
   - Provides 500+ tokens/second processing speed with 14,400 requests/day free tier
 - Backend/LLM: OpenRouter native API implementation
   - Created dedicated `src-tauri/src/llm/services/openrouter.rs` with direct HTTP calls using `reqwest`
   - Follows [OpenRouter API specification](https://openrouter.ai/docs/api-reference/overview) without `graniet/llm` dependency
   - Implements proper HTTP headers (`HTTP-Referer`, `X-Title`) per OpenRouter quickstart guide
   - Enhanced error handling with OpenRouter-specific error response parsing
   - Added `ProviderKind::Openrouter` to enum and factory support
   - Created `src-tauri/models/openrouter.json` with free and paid models (GPT-4o, Claude, Llama, Gemini)
   - Updated provider commands to load OpenRouter models from JSON catalog
 - Frontend/Settings: OpenRouter provider support
   - Added OpenRouter to available providers in provider store
   - OpenRouter appears as selectable provider in settings with model dropdown
   - Supports free models like `openai/gpt-oss-20b:free` and `meta-llama/llama-3.1-8b-instruct:free`
 - Backend/Engines: Experimental Wolf RPG support (Windows-only)
   - New `EngineType::WolfRpg`, factory detection via presence of `Data/`
   - Orchestrates external tools: UberWolfCli (optional decrypt) + WolfTL (create dump / patch)
   - Extracts strings from `dump/*.json` with stable JSON-pointer IDs and injects back before patching
   - Tools are expected in `src-tauri/src/engines/wolf_rpg/exe/` during dev; can be overridden via `LUDOLINGUA_WOLF_TOOLS`
 - Backend/Common: JSON walker helpers to collect/apply text units (`wolf_json:<dump_rel>#<pointer>`)
 - Frontend/Translation: Add "Add to glossary" action in results, mapping PromptType → Category
 - Backend/LLM: Apply Ollama `ModelOptions` for generation (`temperature`, `num_predict` aka max_tokens) so settings affect outputs.
 - Settings: Presets for Temperature/Max Tokens (Recommended, High, Creative) in `app/pages/settings.vue`.
 - About: LLM Parameters card and Performance & Hardware guidance in `AboutTechnology.vue`.
 - About: Tabbed navigation in `app/pages/about.vue` (What/Features/Technology/Glossary).
 - Backend/Text Processing: Preserve significant whitespace via placeholders in translation flow
   - Encode full-width spaces into `[FWSPC_n]`, ASCII space runs (leading/trailing or len≥2) into `[SPC_n]`, and tabs into `[TAB_n]`
   - Decode placeholders on injection to restore exact spacing
   - Integrated into `replace_formatting_codes_for_translation` and `restore_formatting_codes_after_translation`
 - Developer documentation: Added concise Rustdoc to core backend modules and TSDoc to main frontend stores
  to clarify responsibilities and data flow without changing behavior.
 - Backend/LLM: Multi-provider architecture with OpenAI support
   - `core/provider.rs`: `ProviderKind` enum and `LlmService` trait
   - `llm/factory.rs`: `create_service(LlmConfig)` selects provider (Ollama/OpenAI)
   - `llm/services/openai.rs`: OpenAI via `LLMBuilder` (api_key, model, temperature, max_tokens)
   - `commands/provider.rs`: `get_provider_models` loads `models/{provider}.json`
   - `models/openai.json`: Model metadata with pricing and context windows
 - Frontend/Settings: Provider selector and provider-specific model lists
   - `components/settings/ProviderSelector.vue` (provider + model)
   - `stores/provider.ts` (load providers, models, test)
 - Frontend/Token Estimation: Pre-run project token and cost estimate
   - `useTranslation.estimateTokens()` and `ProjectStats.vue` token card
 - Backend/Token Estimation: `utils/token_estimation.rs` + Tauri command; uses `ModelInfo.pricing`

### Changed
- **LLM Crate Migration:** Complete migration from `ollama-rs` to unified `llm` crate for better extensibility
  - **Dependencies:** Replaced `ollama-rs = "0.3.2"` with `llm = { version = "1.2.4", features = ["ollama"] }`
  - **OllamaService Migration:** Updated `src/llm/services/ollama.rs` to use `llm` crate's `LLMBuilder` pattern with `LLMBackend::Ollama`
  - **API Integration:** Implemented proper configuration builder with model, temperature, max_tokens, and base_url support
  - **Response Handling:** Fixed ChatResponse text extraction using Display trait implementation (`format!("{}", response)`)
  - **Backward Compatibility:** Maintained all existing methods and functionality (generate, test_connection, config_matches)
  - **Future-Ready:** Prepared foundation for easy addition of multiple LLM providers (OpenAI, Anthropic, DeepSeek, etc.)
  - **Type Safety:** Enhanced with `Box<dyn LLMProvider>` for unified provider interface
 - Backend/LLM State: `LlmState` now stores `Box<dyn LlmService>` and rebuilds on config change
 - Backend/Translation: Retry logic now stops immediately on fatal provider `insufficient_quota`
 - Backend/OpenAI: `test_connection` treats HTTP 429 as reachable, but reports `insufficient_quota` as not connected
 - Backend/OpenAI: Base URL normalization (strip trailing `/v1`); base URL optional
 - Frontend/Settings: Save `base_url` only for Ollama; clear for OpenAI automatically

### Fixed
 - OpenAI: Avoid 404/RelativeUrl errors by normalizing optional base URL and leaving it empty by default
 - Frontend/Translation: Abort batch early with clear toast when OpenAI reports `insufficient_quota`
 - Provider model loading: `get_provider_models` resolves `openai.json` correctly
 - Backend/Manifest: Fixed manifest hash mismatch causing "No translations found" error
  - Translations were saved with old format hash (`project_/path`) but queried with new format hash (SHA)
  - Updated `translate_text_unit` to use correct manifest hash from engine info instead of hardcoded format
  - Removed old manifest hash format support for consistency
  - Simplified manifest system to use single SHA hash format
- Backend/Manifest: Fixed manifest statistics preservation
  - Manifest now preserves `total_text_units` and `translated_text_units` when recreated
  - Statistics are maintained across project configuration changes
  - Automatic updates after text extraction and translation completion
- Backend/Engines: Fixed "Engine does not support extracting game data files" when loading MZ projects by adding MZ-specific dispatch in `commands/engine.rs`.
- Frontend/Translation UX: Fixed double-wrapped refs in `app/composables/useTranslation.ts` causing incorrect busy/progress rendering.
- Frontend/Batch Cancel: Batch translation now respects cancellation by checking `isTranslating` inside the loop in `app/stores/translate.ts`.
- Frontend/Translation: `translate_text_unit` invoke now passes snake_case keys (`text_unit`, `engine_info`) and uses `settingsStore.providerConfig` (temperature/max_tokens) instead of provider defaults.
- Defaults: Adjusted Ollama defaults to conservative translation values (temperature 0.3, max_tokens 256).
- Frontend/Translation: Add backward-compat invoke payload keys (`textUnit`, `engineInfo`) to tolerate older backend builds.
- Settings/ConnectionTester: Connection test now uses current settings config (`providerConfig`) instead of static defaults.
- ProjectStats: Simplified Token Settings (show Temperature + Max Tokens only); removed noisy token estimates.
- AboutTechnology: Replaced unavailable components with Tailwind grid and `USeparator`.
- GlossaryTable: Removed "All languages" option in language filters.
- Accessibility: Updated `GlossaryForm.vue` and `TranslationEditor.vue` modals to use `#title`/`#description`/`#actions`.
- Backend/Storage: SQLite glossary database is now stored under the OS app data directory via Tauri path resolver instead of the process working directory.
  - Prevents write failures in packaged apps (read-only bundles, Program Files on Windows).
  - Path examples: Windows `%AppData%/LudoLingua/ludolingua.db`, macOS `~/Library/Application Support/LudoLingua/ludolingua.db`, Linux `~/.local/share/LudoLingua/ludolingua.db`.
  - Existing dev DB files in `src-tauri/ludolingua.db*` are no longer used.
- Roadmap/Planning: Deferred backend stability items (LLM rate limiting, translation cache, auto-backup) from Phase 7 to Phase 8.0; and frontend batch groundwork to Phase 8.3. Updated `TODO.md`, `ROADMAP.md`, and `PROGRESS.MD` accordingly.
- Backend/LLM: Introduced managed shared state for Ollama client and lightweight rate limiting.
  - Added `LlmState` (shared `OllamaService` + `Semaphore`) and registered it in `lib.rs`.
  - Refactored `translate_text_unit` to use `State<LlmState>` and added `translate_with_retry` (timeout + retries).
  - Simplified `OllamaService` with low-level `generate(prompt)`; `translate` kept temporarily as a wrapper.
  - Observed stable keep-alive: single connection init then steady completions during batch.
- **Prompt Loading Robustness & DRY Runtime:**
  - Embedded prompt templates in production builds to avoid filesystem path issues
  - Kept filesystem loading in dev for easy iteration
  - Moved `PromptType` → template path mapping onto the enum itself
  - Filter `vocabularies.txt` by prompt type to reduce token usage and duplication
  - Cleaned duplicate `#[allow(dead_code)]` attributes in Ollama service
- **Language Catalog:**
  - Added `src-tauri/models/language.json` catalog (id, label, native_name, dir, enabled)
  - New backend command `get_languages` returns enabled languages from embedded JSON
  - Frontend `language` store now loads languages from backend and applies RTL via `dir` on `<html>`
  - Unified type: single `Language` model across BE/FE (removed separate catalog type)
- **Prompt Placeholder Standardization:**
  - Replaced RPG Maker percent parameters `%n` with bracketed `[ARG_n]` in prompts
  - Standardized newline examples to use `[NEWLINE_1]` token instead of literal line breaks in examples
  - Added `[NEWLINE_n]` to preserved token list in `prompts/basic.txt`
  - Updated examples in `dialogue.txt`, `equipment.txt`, `skill.txt`, `class.txt`, and `state.txt` to reflect new tokens

- **LLM Architecture Simplification (Ollama-only):**
  - Removed multi-provider abstraction (trait + factory); direct `OllamaService` calls
  - Simplified `LlmConfig` to Ollama-only fields; removed `Provider` enum and extra fields
  - Renamed command to `get_ollama_models`; removed `get_available_providers`
  - Frontend refactor to `OllamaConfig`; removed provider selector UI; invokes updated

- **Framework Migration to Nuxt 4 + pnpm:** Complete migration to latest technologies
  - **Nuxt 4 Upgrade:** Migrated from Nuxt 3.18.1 to Nuxt 4.0.3 with all latest features
  - **pnpm Package Manager:** Switched from npm to pnpm for better performance and dependency resolution
  - **Directory Structure Migration:** Automatically migrated to new Nuxt 4 `app/` directory structure using official codemod
  - **Pinia Integration:** Resolved Pinia initialization issues with manual plugin setup for better compatibility
  - **Build System Updates:** Updated all dependencies, TypeScript configurations, and build processes
  - **Development Experience:** Enhanced development workflow with better TypeScript support and modern architecture
- **Complete RPG Maker MV File Support:** Successfully implemented support for all 7 major RPG Maker MV data files
  - **Items.json Support:** Complete implementation for RPG Maker MV Items.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/items.rs` with `Item` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions for Items.json
    - Updated engine to detect and process Items.json alongside Actors.json
    - Added proper ID prefixing (`item_`) for text unit identification
  - **Skills.json Support:** Complete implementation for RPG Maker MV Skills.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/skills.rs` with `Skill` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions for Skills.json
    - Updated engine to detect and process Skills.json alongside Actors.json and Items.json
    - Added proper ID prefixing (`skill_`) for text unit identification
    - Supports extraction of skill names, descriptions, messages, and notes
  - **Weapons.json Support:** Complete implementation for RPG Maker MV Weapons.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/weapons.rs` with `Weapon` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions for Weapons.json
    - Updated engine to detect and process Weapons.json alongside other file types
    - Added proper ID prefixing (`weapon_`) for text unit identification
    - Supports extraction of weapon names, descriptions, and notes
  - **Armors.json Support:** Complete implementation for RPG Maker MV Armors.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/armors.rs` with `Armor` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions for Armors.json
    - Updated engine to detect and process Armors.json alongside other file types
    - Added proper ID prefixing (`armor_`) for text unit identification
    - Supports extraction of armor names, descriptions, and notes
      - **Classes.json Support:** Complete implementation for RPG Maker MV Classes.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/classes.rs` with `Class` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions for Classes.json
    - Updated engine to detect and process Classes.json alongside other file types
    - Added proper ID prefixing (`class_`) for text unit identification
    - Supports extraction of class names and notes
    - **System.json Support:** Complete implementation for RPG Maker MV System.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/system.rs` with `System` and `Terms` structs for complex nested structure
    - Implemented custom `extract_text` and `inject_translations` functions for System.json's unique single-object structure
    - Updated engine to detect and process System.json alongside other file types
    - Added proper ID prefixing (`system_`) for text unit identification
    - Supports extraction of game title, currency unit, armor types, elements, equipment types, skill types, weapon types, switches, variables, and UI terms/messages
    - Handles complex nested structure with terms object containing basic, commands, params, and messages arrays
    - Fixed System.json message translation to use correct prompt type (System instead of Other) for proper system text handling
    - **States.json Support:** Complete implementation for RPG Maker MV States.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/states.rs` with `State` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions using common helper functions
    - Updated engine to detect and process States.json alongside other file types
    - Added proper ID prefixing (`state_`) for text unit identification
    - Supports extraction of status effect names, descriptions, battle messages, and developer notes
    - Created specialized `state.txt` prompt file for RPG status effect translation
    - Added `PromptType::State` enum variant for status effect-specific translation guidance
    - Handles complex array structure with null values and empty states filtering
    - Enhanced `state.txt` prompt with better battle message examples and stricter output formatting
    - **Enemies.json Support:** Complete implementation for RPG Maker MV Enemies.json file parsing and translation
    - Added `src/engines/rpg_maker_mv/files/enemies.rs` with `Enemy` struct and translatable fields
    - Implemented `extract_text` and `inject_translations` functions using common helper functions
    - Updated engine to detect and process Enemies.json alongside other file types
    - Added proper ID prefixing (`enemy_`) for text unit identification
    - Supports extraction of enemy names and developer notes
    - Handles complex array structure with null values and empty enemies filtering
- **CommonEvents.json Support:** Complete implementation for RPG Maker MV CommonEvents.json file parsing and translation
- Added `src/engines/rpg_maker_mv/files/common_events.rs` with `CommonEvent` and `EventCommand` structs
- Implemented `extract_text` and `inject_translations` functions using common helper functions
- Updated engine to detect and process CommonEvents.json alongside other file types
- Added proper ID prefixing (`common_event_`) for text unit identification
- Supports extraction of event names, message content (code 401), comments (code 108), and other translatable parameters
- Handles complex event command structure with nested parameters and command codes
- Used appropriate prompt types (Character for names, Dialogue for messages, Other for comments and parameters)
- Handles complex array structure with null values and empty events filtering
- **MapInfos.json Support:** Complete implementation for RPG Maker MV MapInfos.json file parsing and translation
- Added `src/engines/rpg_maker_mv/files/maps_infos.rs` with `MapInfo` struct and translatable fields
- Implemented `extract_text` and `inject_translations` functions using common helper functions
- Updated engine to detect and process MapInfos.json alongside other file types
- Added proper ID prefixing (`map_info_`) for text unit identification
- Supports extraction of map names from the map tree/structure file
- Handles complex array structure with null values and empty map entries filtering
- Used appropriate prompt types (Character for map names)
- Distinguished between MapInfos.json (map metadata) and MapXXX.json (map content) files
- **MapXXX.json Support:** Complete implementation for RPG Maker MV MapXXX.json file parsing and translation with dynamic file discovery
- Added `src/engines/rpg_maker_mv/files/maps.rs` with comprehensive data structures for Map, MapEvent, EventPage, and EventCommand
- Implemented dynamic file discovery to automatically handle Map001.json, Map002.json, etc.
- Added `extract_text` and `inject_translations` functions following the established architecture pattern
- Updated engine to include dynamic MapXXX.json discovery and processing
- Added proper ID prefixing (`map_event_`) for text unit identification
- Supports extraction of event names, notes, messages (code 401), and comments (code 108) from map events
- Handles complex nested structure with events, pages, and commands
- Used appropriate prompt types (Character for event names, Dialogue for messages, Other for notes/comments)
- Robust error handling with graceful fallback for individual map files
- Dynamic file discovery eliminates need for hardcoded map file lists
- **Enhanced Prompt System:** Comprehensive prompt architecture optimization for better translation quality
  - **Streamlined Base Prompt:** Created `basic.txt` as optimized base prompt (removed overwhelming examples)
  - **Unified Equipment Prompts:** Consolidated `weapon.txt` and `item.txt` into unified `equipment.txt`
  - **Specific Translation Guides:** Added mandatory translation mappings to all prompt files for consistency
  - **Enhanced Output Format:** Improved instructions to prevent unwanted comments, prefixes, and metadata
  - **Field-Specific Guidelines:** Added tailored instructions for character names, equipment, skills, and classes
  - **Erotic Content Handling:** Enhanced terminology and examples for adult game content translation
  - **Organized Dialogue Examples:** Moved dialogue-specific examples from `basic.txt` to `dialogue.txt` for better organization
  - **Flexible Skill Guidelines:** Replaced rigid skill message mappings with flexible pattern-based guidelines
  - **Enhanced Class Translations:** Improved RPG class distinctions (勇者 → Hero, 戦士 → Warrior)
- **Improved Debugging & Monitoring:** Enhanced application monitoring and debugging capabilities
  - **Project Statistics Enhancement:** Added language configuration display to `ProjectStats.vue`
  - **Translation Quality Monitoring:** Added comprehensive logging to `TranslationTable.vue` for translation debugging
  - **Settings Store Improvements:** Enhanced provider store with proper initialization and settings loading
  - **Configuration Display:** Added AI and language configuration logging for troubleshooting
- **Enhanced User Interface:** Improved user experience with better workflow and usability features
  - **Load New Project:** Added "Load New Project" button to main page header for easy project switching
  - **Reset Functionality:** Added "Reset" button to TranslationTable for clearing all translations
  - **Enhanced Button States:** Improved button availability logic (Inject only when translation finished)
  - **Better Progress Tracking:** Enhanced translation progress indicators and status management
  - **Improved User Experience:** Streamlined project loading workflow with better feedback

### Changed
- **Framework Architecture:** Complete migration to Nuxt 4 with modern development practices
  - **Package Manager:** Switched from npm to pnpm for improved performance and dependency management
  - **Directory Structure:** Migrated to new Nuxt 4 `app/` directory structure for better organization and performance
  - **Pinia Integration:** Manual Pinia initialization for better control and compatibility
  - **Build System:** Updated to latest Nuxt 4 build system with enhanced TypeScript support
  - **Development Workflow:** Improved development experience with modern tooling and architecture
- **Common Helper Functions Architecture:** Refactored engine implementation to use reusable helper functions
  - Created `src/engines/common.rs` with generic `extract_file_type_text` and `inject_file_type_translations` functions
  - Updated RPG Maker MV engine to use common helper functions instead of private implementations
  - Eliminated code duplication between engine implementations
  - Improved maintainability and consistency across all file types
  - Made it easier to add new file types (just 3 lines of code per file type)
  - Enhanced type safety with proper generic function signatures
- **Advanced Common Functions Architecture:** Further refactored file modules to use higher-level abstraction functions
  - Created `src/engines/rpg_maker_mv/files/common.rs` with `extract_text_from_file_with_objects` and `inject_translations_into_file_with_objects` functions
  - Refactored all file modules (`actors.rs`, `items.rs`, `skills.rs`, `weapons.rs`, `armors.rs`, `classes.rs`) to use new common functions
  - Achieved ~70% reduction in code duplication across file modules
  - File-specific modules now focus only on their unique data structures and field logic
  - Eliminated boilerplate code for file existence checks, JSON parsing, and iteration
  - Improved maintainability and readability of all file processing code
- **Prompt System Architecture:** Comprehensive prompt system optimization and consolidation
  - **Consolidated Equipment Prompts:** Merged `weapon.txt` and `item.txt` into unified `equipment.txt` for better consistency
  - **Updated PromptType Enum:** Replaced separate `Weapon` and `Item` types with unified `Equipment` type
  - **Streamlined Base Prompt:** Created `basic.txt` as optimized base prompt, removing overwhelming examples
  - **Enhanced Translation Quality:** Added mandatory translation mappings and improved output format instructions
  - **Field-Specific Optimization:** Added tailored guidelines for different text types (character names, equipment, skills, etc.)
  - **Improved LLM Integration:** Updated `PromptBuilder` and file parsers to use new consolidated prompt system
  - **Organized Dialogue Examples:** Moved dialogue-specific examples from `basic.txt` to `dialogue.txt` for better organization
  - **Flexible Skill Guidelines:** Replaced rigid skill message mappings with flexible pattern-based guidelines for better cross-game compatibility
  - **Enhanced Class Translations:** Improved RPG class distinctions with proper translations (勇者 → Hero, 戦士 → Warrior)
- **User Interface Enhancements:** Improved user experience and workflow
  - **Project Management:** Added "Load New Project" functionality for easy project switching
  - **Translation Workflow:** Enhanced TranslationTable with Reset button and improved button states
  - **Progress Tracking:** Better translation progress indicators and status management
  - **User Feedback:** Improved loading states, error handling, and visual feedback

### Technical Improvements
- **Framework Migration:** Successfully migrated to Nuxt 4 + pnpm with enhanced performance and modern architecture
- **Package Management:** Improved dependency resolution and installation speed with pnpm
- **Directory Structure:** Better organization with new Nuxt 4 `app/` directory structure for improved IDE support
- **Pinia Compatibility:** Resolved initialization issues for better state management
- **Build Performance:** Enhanced build system with latest Nuxt 4 optimizations
- **Development Experience:** Modern development workflow with better TypeScript support and tooling
- **Engine Architecture:** Reduced code complexity by ~100 lines through common helper functions
- **Error Handling:** Consistent error handling and logging across all file types
- **Reusability:** Common functions can be used across different RPG Maker versions (MV, MZ, etc.)
- **Type Safety:** Enhanced generic function implementations with proper error handling
- **File Module Architecture:** Achieved ~70% code reduction in file modules through advanced common functions
- **Code Maintainability:** File-specific modules now focus only on unique data structures and field logic
- **Boilerplate Elimination:** Removed repetitive file I/O, JSON parsing, and iteration code from all file modules
- **Prompt System Optimization:** Streamlined prompt architecture with ~50% reduction in prompt complexity
- **Translation Quality Enhancement:** Eliminated LLM output inconsistencies through mandatory translation mappings
- **Debugging Capabilities:** Enhanced monitoring and debugging tools for better translation quality assessment
- **Settings Management:** Improved settings store initialization and configuration display for better user experience
- **User Experience:** Enhanced workflow with better button states, progress tracking, and project management
- **Cross-Game Compatibility:** Flexible skill guidelines allow for different game styles and translation preferences
- **Prompt Organization:** Better separation of concerns with dialogue examples properly organized in dedicated files

## [0.2.0] - 2025-08-13

### Added
- Backend/Engines: RPG Maker MZ support (core files parity with MV)
  - `rpg_maker_mz/engine.rs` detects MZ and reuses MV modules with `data/*` paths
  - Implemented extraction/injection for: Actors, Classes, Items, Skills, Weapons, Armors, System, States, Enemies, CommonEvents, Troops, MapInfos, and MapXXX (event text)
  - Factory returns MZ engine; command layer dispatch updated

### Changed

### Fixed
- Backend/Engines: Fixed “Engine does not support extracting game data files” when loading MZ projects by adding MZ-specific dispatch in `commands/engine.rs`.

## [0.1.0] - 2024-01-XX

### Added
- Initial release with Actors.json translation support
- Basic RPG Maker MV project loading and text extraction
- AI translation integration with Ollama support
- Settings management and configuration persistence
- Translation workflow with status tracking and error handling
